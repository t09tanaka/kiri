<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#080b10" />
    <meta name="color-scheme" content="dark" />
    <title>kiri</title>
    <!-- Preconnect to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Loading screen styles (inline to prevent FOUC) -->
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        background: #080b10;
        overflow: hidden;
      }
      #app {
        height: 100%;
        width: 100%;
      }

      /* ===== Loading Screen ===== */
      .loading-screen {
        position: fixed;
        inset: 0;
        background: #080b10;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        opacity: 1;
        transition:
          opacity 0.6s ease-out,
          transform 0.6s ease-out;
      }

      .loading-screen.fade-out {
        opacity: 0;
        transform: scale(1.02);
        pointer-events: none;
      }

      /* ===== Background Layers ===== */
      .loading-bg {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }

      .loading-bg-base {
        background:
          radial-gradient(
            ellipse 120% 80% at 50% 100%,
            rgba(100, 210, 255, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(ellipse 100% 60% at 50% 0%, rgba(191, 90, 242, 0.02) 0%, transparent 50%);
      }

      .loading-bg-mist {
        background: radial-gradient(
          ellipse 100% 40% at 50% 100%,
          rgba(100, 210, 255, 0.04) 0%,
          transparent 70%
        );
        animation: mistDrift 20s ease-in-out infinite;
      }

      .loading-bg-mist-2 {
        background: radial-gradient(
          ellipse 80% 30% at 30% 80%,
          rgba(191, 90, 242, 0.03) 0%,
          transparent 70%
        );
        animation: mistDrift 25s ease-in-out infinite reverse;
        opacity: 0.7;
      }

      .loading-bg-vignette {
        background: radial-gradient(
          ellipse 70% 60% at center,
          transparent 40%,
          rgba(0, 0, 0, 0.4) 100%
        );
      }

      @keyframes mistDrift {
        0%,
        100% {
          transform: translateX(-5%) scaleX(1.1);
          opacity: 0.6;
        }
        50% {
          transform: translateX(5%) scaleX(1);
          opacity: 0.4;
        }
      }

      /* ===== Floating Particles ===== */
      .loading-particles {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
      }

      .particle {
        position: absolute;
        width: 3px;
        height: 3px;
        border-radius: 50%;
        background: rgba(100, 210, 255, 0.5);
        opacity: 0;
        animation: particleRise 20s ease-in-out infinite;
      }

      .particle:nth-child(odd) {
        background: rgba(191, 90, 242, 0.5);
        animation-duration: 25s;
      }

      .particle-1 {
        left: 10%;
        animation-delay: 0s;
      }
      .particle-2 {
        left: 20%;
        animation-delay: 3s;
      }
      .particle-3 {
        left: 35%;
        animation-delay: 1s;
      }
      .particle-4 {
        left: 50%;
        animation-delay: 4s;
      }
      .particle-5 {
        left: 65%;
        animation-delay: 2s;
      }
      .particle-6 {
        left: 80%;
        animation-delay: 5s;
      }
      .particle-7 {
        left: 90%;
        animation-delay: 1.5s;
      }

      @keyframes particleRise {
        0% {
          transform: translateY(100vh) scale(0);
          opacity: 0;
        }
        10% {
          opacity: 0.6;
        }
        50% {
          opacity: 0.3;
        }
        90% {
          opacity: 0.4;
        }
        100% {
          transform: translateY(-10vh) scale(1);
          opacity: 0;
        }
      }

      /* ===== Content ===== */
      .loading-content {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        animation: contentFadeIn 1s ease-out;
      }

      @keyframes contentFadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ===== Logo ===== */
      .loading-logo {
        position: relative;
        width: 80px;
        height: 80px;
        animation: logoFloat 4s ease-in-out infinite;
      }

      .loading-logo svg {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 0 20px rgba(100, 210, 255, 0.3));
      }

      .logo-glow {
        position: absolute;
        inset: -30px;
        background: radial-gradient(circle, rgba(100, 210, 255, 0.15) 0%, transparent 70%);
        animation: glowPulse 4s ease-in-out infinite;
      }

      @keyframes logoFloat {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-8px);
        }
      }

      @keyframes glowPulse {
        0%,
        100% {
          opacity: 0.3;
          transform: scale(1);
        }
        50% {
          opacity: 0.6;
          transform: scale(1.1);
        }
      }

      /* ===== Title ===== */
      .loading-title {
        display: flex;
        align-items: baseline;
        gap: 8px;
        margin-top: 24px;
      }

      .loading-text {
        font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
        font-size: 32px;
        font-weight: 300;
        letter-spacing: 0.2em;
        background: linear-gradient(90deg, #f0f4f8, #64d2ff, #f0f4f8);
        background-size: 200% 100%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: textShimmer 4s ease-in-out infinite;
      }

      @keyframes textShimmer {
        0%,
        100% {
          background-position: 200% center;
        }
        50% {
          background-position: 0% center;
        }
      }

      .loading-kanji {
        font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
        font-size: 18px;
        color: #64d2ff;
        opacity: 0.4;
        animation: kanjiGlow 4s ease-in-out infinite;
      }

      @keyframes kanjiGlow {
        0%,
        100% {
          opacity: 0.3;
        }
        50% {
          opacity: 0.6;
        }
      }

      /* ===== Loading Indicator ===== */
      .loading-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-top: 40px;
        color: rgba(240, 244, 248, 0.4);
        font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', sans-serif;
        font-size: 12px;
        font-weight: 400;
        letter-spacing: 0.05em;
      }

      .loading-spinner {
        width: 14px;
        height: 14px;
        border: 1.5px solid rgba(100, 210, 255, 0.2);
        border-top-color: #64d2ff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .loading-status {
        opacity: 0.6;
      }
    </style>
  </head>
  <body>
    <!-- Loading screen -->
    <div class="loading-screen" id="loading-screen">
      <!-- Background layers -->
      <div class="loading-bg loading-bg-base"></div>
      <div class="loading-bg loading-bg-mist"></div>
      <div class="loading-bg loading-bg-mist-2"></div>
      <div class="loading-bg loading-bg-vignette"></div>

      <!-- Floating particles -->
      <div class="loading-particles">
        <div class="particle particle-1"></div>
        <div class="particle particle-2"></div>
        <div class="particle particle-3"></div>
        <div class="particle particle-4"></div>
        <div class="particle particle-5"></div>
        <div class="particle particle-6"></div>
        <div class="particle particle-7"></div>
      </div>

      <div class="loading-content">
        <!-- Mountain logo -->
        <div class="loading-logo">
          <div class="logo-glow"></div>
          <svg viewBox="0 0 48 48" fill="none">
            <defs>
              <linearGradient id="loadingGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#64d2ff" stop-opacity="0.9" />
                <stop offset="100%" stop-color="#bf5af2" stop-opacity="0.7" />
              </linearGradient>
              <filter id="loadingGlow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="1.5" result="blur" />
                <feMerge>
                  <feMergeNode in="blur" />
                  <feMergeNode in="SourceGraphic" />
                </feMerge>
              </filter>
            </defs>
            <!-- Mountain silhouette -->
            <path
              d="M8 36 L16 22 L20 28 L28 16 L36 26 L40 36"
              stroke="url(#loadingGradient)"
              stroke-width="2"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
              filter="url(#loadingGlow)"
            />
            <!-- Mist layers -->
            <path
              d="M4 38 Q12 35 24 37 Q36 35 44 38"
              stroke="#64d2ff"
              stroke-width="1.2"
              fill="none"
              opacity="0.5"
              stroke-linecap="round"
            />
            <path
              d="M6 42 Q18 39 30 41 Q42 39 46 42"
              stroke="#bf5af2"
              stroke-width="1"
              fill="none"
              opacity="0.3"
              stroke-linecap="round"
            />
          </svg>
        </div>

        <div class="loading-title">
          <span class="loading-text">kiri</span>
          <span class="loading-kanji">éœ§</span>
        </div>

        <div class="loading-indicator">
          <div class="loading-spinner"></div>
          <span class="loading-status">Restoring session...</span>
        </div>
      </div>
    </div>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
    <script>
      // Remove loading screen after app is mounted
      window.addEventListener('load', function () {
        setTimeout(function () {
          var loader = document.getElementById('loading-screen');
          if (loader) {
            loader.classList.add('fade-out');
            setTimeout(function () {
              loader.remove();
            }, 500);
          }
        }, 400);
      });
    </script>
  </body>
</html>
